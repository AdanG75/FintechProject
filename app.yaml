runtime: python39
entrypoint: gunicorn -w 8 -k uvicorn.workers.UvicornWorker main:app
instance_class: F4_1G

env_variables:
  PROJECT_NAME: "fintech75"
  PROJECT_VERSION: "1.0.0"
  ACCESS_TOKEN_EXPIRE_MINUTES: "60"
  ID_SYSTEM: "ID_SYSTEM"
  MARKET_SYSTEM: "MARKET_SYSTEM"
  SECRET_KEY: "SECRET_SECRET_KEY"
  ALGORITHM: "SECRET_ALGORITHM"
  DB_SOCKET_DIR: "SECRET_DB_SOCKET_DIR"
  POSTGRES_DB: "SECRET_POSTGRES_DB"
  POSTGRES_USER: "SECRET_POSTGRES_USER"
  POSTGRES_PASSWORD: "SECRET_POSTGRES_PASSWORD"
  INSTANCE_CONNECTION_NAME: "SECRET_INSTANCE_CONNECTION_NAME"
  CIPHER_KEY: "SECRET_CIPHER_KEY"
  IV: "SECRET_IV"
  BLOCK_SIZE: "SECRET_BLOCK_SIZE"
  PUBLIC_KEY: "PUBLIC_KEY"
  PRIVATE_KEY: "SECRET_PRIVATE_KEY"
  SERVER_BUCKET: "SECRET_SERVER_BUCKET"
  GOOGLE_TOKEN: "SECRET_GOOGLE_TOKEN"
  GOOGLE_REFRESH_TOKEN: "SECRET_GOOGLE_REFRESH_TOKEN"
  GOOGLE_CLIENT_ID: "SECRET_GOOGLE_CLIENT_ID"
  GOOGLE_CLIENT_SECRET: "SECRET_GOOGLE_CLIENT_SECRET"
  TOKEN_URI: "https://oauth2.googleapis.com/token"
  REDIS_HOST: "SECRET_REDIS_HOST"
  REDIS_PORT: "6379"

handlers:
  - url: /favicon\.ico
    static_files: favicon.ico
    upload: favicon\.ico

  - url: /.*
    script: main.app
    secure: always

vpc_access_connector:
    name: projects/fintech75/locations/us-central1/connectors/conector-fintech75

inbound_services:
- warmup
